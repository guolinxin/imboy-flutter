## 功能树
### 聊天会话页面
* 聊天会话页面顶部右侧菜单
    * “发起群聊”跳转 TODO
    * “添加好友”跳转 TODO (目前只有扫描二维码添加好友功能)
    * “我的二维码”跳转 OK
    * “扫一扫”功能 OK（扫本APP二维码添加好友，其他二维码跳转到响应地址，或者现在二维码内容）
* 聊天会话页面顶部“搜索”调整 TODO
* 聊天会话列表 OK
    * 会话项左滑动“删除”会话 OK
    * 会话项左滑动“不显示”会话 OK
    * 会话项左滑动“标为未读、标为已读”会话 OK
* 聊天会话新消息提醒 OK

### 单聊页面
* 单聊 数据聊天分页 OK
* 单聊“左滑页面返回”功能 OK
* 单聊"滑动消息，引用提示"功能 OK
* 单聊 基于WebRTC 一对一实时语音通话功能 （OK） （通话消息待写入sqlite3 TODO）
* 单聊 基于WebRTC 一对一实时视频通话功能 （OK） （信令交互体验有待进一步优化）
* 单聊 基于WebRTC 端对端传输文件功能 TODO
* 单聊 发送文本消息 OK
* 单聊 发送、拍摄视频消息 OK （播放视频体验可以进一步优化）
* 单聊 发送、拍摄图片消息 （照片有滑动放大功能）OK
    * 拍摄照片上传 OK
    * 聊天界面“单击or双击图片”全屏展示，再单击图片取消全屏 OK
    * 压缩上传 OK
    * 文件秒传功能（首先通过文件sha1值查询存储服务是否已经上传过，再重新上传） OK
* 单聊 发送文件消息 OK
    * 附件上传进度条 OK (引入 flutter_easyloading，体验待优化

* 单聊 发送表情消息 OK （表情包图像有缺失问题，第三方库问题，以后有时间优化 TODO）
* 单聊 发送语音消息 OK （语音消息录音、发送、播放功能OK，可以进一步优化体验）
* 单聊 发送位置消息 TODO
* 单聊 发送个人名片功能 TODO
* 单聊 发送“收藏信息” 功能 TODO
* 单聊 发送“语音输入（语音转文字）”功能 TODO
* 删除消息（清理消息对应的缓存附件，删除会话，清理所有会话对应的消息的缓存附件） OK
* 单聊 阅后即焚功能 TODO
* 单聊 定时消息 TODO
* 单聊 聊天消息长按右键菜单 OK
    * 单聊 右键菜单之删除消息功能 OK
    * 单聊 右键菜单之复制文本消息功能 OK
    * 单聊 右键菜单之撤回文本消息功能 OK
        * 发送消息到服务器，服务判断对端是否在线
            * 在线，投递消息给TO, 收到TO的回复后投递给FROM
            * 离线，回复消息给From，修正之前的消息（已经投递/未投递），做一个"离线的撤销消息"以便二次投递
        * 单聊 删除消息、或者撤回消息之后，需要更新对应的会话信息 OK
        * 单聊 右键菜单之撤回文本消息"重新编辑"功能 OK
        * 单聊 文本消息双击全屏显示(单击关闭之） OK

        * 单聊 右键菜单之引用消息功能 OK
          * 引用文本消息 OK
          * 引用语音消息 OK
          * 引用图片消息 OK
          * 引用视频消息 OK
          * 引用文件消息 OK
          * 引用位置消息 TODO
        * 单聊 右键菜单之转发消息功能 OK(里面的搜索好友功能待实现)
        * 单聊 右键菜单之收藏消息功能 TODO
        * 单聊 右键菜单之多选消息功能 TODO
    * 未读消息提醒 OK (出现没有发送消息也有提醒问题，待优化)

    * 单聊 “单聊转发消息”功能“搜索好友”功能（仅前端工作） TODO
    * 单聊 “单聊转发消息”功能“多选”功能（仅前端工作） TODO

* 单聊 聊天设置
    * 聊天设置 “发起群聊-选择联系人”功能（群聊功能需要在下一版本实现） TODO
    * 聊天设置“查找聊天记录”功能（仅前端工作） TODO
    * 聊天设置“消息免打扰”功能（需要后端配合） TODO
    * 聊天设置“清空聊天记录”功能（仅前端工作） TODO
    * 聊天设置“置顶聊天”功能（仅前端工作，暂不计划实现） TODO
    * 聊天设置“强提醒”功能（没理解如何实现，暂不计划实现） TODO
    * 聊天设置“设置当前聊天背景”功能（需要后端配合？） TODO
    * 聊天设置“投诉”功能（没理解如何实现） TODO

### 联系人页面
* 下拉从服务器同步还有数据功能 OK (可优化同步机制 TODO)
* 右上角“资料设置”跳转 OK
* 我的好友列表 OK (好友数过多要做分页加载数据，暂时没有做分页加载功能 TODO)
* 打击进入好友资料页面，长按直接进入聊天页面 OK
* 好友搜索功能 TODO
 * “新的朋友”页面
    * 右上角“添加朋友”跳转（TODO)
    * “好友申请列表” OK（好友搜索功能 TODO）
    * 连接手机联系人（TODO  需要上传手机通讯录找朋友）
* 好友资料页面
    * 设置标签、备注、描述功能 TODO
    *
* 朋友权限 TODO
* 朋友圈 TODO
* 社交资料 TODO（页面跳转做了，需要进一步优化）
* 群聊 TODO
* 标签  TODO
* 发消息、实时音视频通话跳转 OK
* 资料设置
    * 设置标签功能 TODO
    * 朋友权限 TODO
    * 把他推荐给朋友 TODO
    * 加入黑名单 TODO
    * 投诉 TODO
    * 删除好友 OK

### 添加朋友 TODO
* 扫描二维码添加好友 OK
  * 申请添加好友页面 OK
  * 确认申请好友页面 OK
  * 删除好友申请记录 OK
  * 删除好友功能 OK
* 雷达加朋友 TODO （附近的人好友， 最近一周登录、最近一月登录、最近一年登录，并且共享了位置的用户）
* 手机联系人 TODO（需要用户授权上传通讯录）
* 其他方式 TODO

### 用户认证
* 用户登录（隐藏密码、显示密码，登录密码传输基于RSA算法加密传输） OK
    * “在其他设备登录了”同类型设备强制下线功能（提示"你的账号于19:20在[设备名称]设备上登录了"）
* 用户Email注册功能（获取Email验证码，密码传输基于RSA算法加密传输）OK
* 用户通过Email找回密码 OK
* 用户退出 OK


### 我的页面
* 单击头像，预览图像功能 OK
*
* 个人信息 页面
    * 更换用户头像功能 OK
    * 更换昵称 OK
    * 我的二维码功能 OK （二维码名片，扫描二维码，保存二维码到相册功能）
    * 扫描二维码添加好友功能 OK
    * 设置性别 OK 参考微信效果
    * 设置个性签名 OK
    * 设置地区 OK 参考微信效果
    * 我的地址管理 TODO
    * 修改密码功能 TODO
    * 登录设备列表 TODO
    * 修改登录设备备注名称  TODO
    * 用户基本信息变更后通知好友 TODO
* 朋友圈 TODO
* 收藏 TODO


### 设置页面
* 账号与安全 跳转 TODO
* 青少年模式 跳转 TODO
* 关怀模式 跳转 TODO
* 消息通知 跳转 TODO
* 通用 跳转 TODO
* 朋友权限 跳转 TODO
* 个人信息与权限 跳转 H5 TODO
* 个人信息收集清单 跳转 H5 TODO
* 第三方信息共享清单 跳转 H5 TODO
* 帮助与反馈 跳转 H5 TODO
* 关于 跳转 H5 TODO
* 切换账号 TODO
* 退出登录 OK


### 群组功能 TODO
* 创建群 TODO
* 群聊天 TODO
* 群其他功能 TODO

### 朋友圈功能 TODO

### 其他功能
* APP启动引导动画 OK (首次启动ISO里面，缺少启动图片；Android iOS 启动都有点儿慢大概需要6秒，待优化 TODO)
* 搜索联系人 TODO
* 添加分组、编辑分组、删除分组 TODO
* 多语言支持 OK(服务端还没有支持多语言、很多文案还没有配置多语言)
* 以.env文件来管理APP环境相关的常量配置 OK
* 消息推送功能 TODO
* 异步拉取离线消息功能 TODO
* APP强制更新功能 TODO
* 附件本地存储管理功能（图片、视频、音频等文件本地缓存管理） TODO
*
